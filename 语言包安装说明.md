# Tesseract 语言包本地安装说明

## 为什么需要本地语言包？

默认情况下，Tesseract.js 会从 CDN 下载语言包（约15MB），可能会比较慢。将语言包安装到本地可以：
- ✅ 避免每次首次访问时从网络下载
- ✅ 提高加载速度
- ✅ 在离线环境下也能使用

## 安装步骤

### 方法一：直接下载（推荐）

1. **下载语言包文件**
   
   访问以下链接下载中文简体语言包：
   ```
   https://github.com/naptha/tessdata/raw/gh-pages/4.0.0_fast/chi_sim.traineddata.gz
   ```
   
   或者使用备用链接（可能更快）：
   ```
   https://cdn.jsdelivr.net/gh/naptha/tessdata@gh-pages/4.0.0_fast/chi_sim.traineddata.gz
   ```

2. **放置文件**
   
   将下载的 `chi_sim.traineddata.gz` 文件放入插件目录下的 `tessdata` 文件夹：
   ```
   blog.ybyq.wang/
   └── usr/
       └── plugins/
           └── SleepData/
               └── tessdata/
                   └── chi_sim.traineddata.gz  ← 放这里
   ```

3. **验证安装**
   
   刷新页面，在识别图片时，如果看到提示 "使用本地语言包，加载更快 ⚡"，说明安装成功！

### 方法二：使用命令行下载（适合有技术背景的用户）

在插件目录下执行：

```bash
cd D:\67656\Documents\blog.ybyq.wang\usr\plugins\SleepData
curl -L -o tessdata/chi_sim.traineddata.gz https://github.com/naptha/tessdata/raw/gh-pages/4.0.0_fast/chi_sim.traineddata.gz
```

或使用 PowerShell：

```powershell
cd D:\67656\Documents\blog.ybyq.wang\usr\plugins\SleepData
Invoke-WebRequest -Uri "https://github.com/naptha/tessdata/raw/gh-pages/4.0.0_fast/chi_sim.traineddata.gz" -OutFile "tessdata\chi_sim.traineddata.gz"
```

## 故障排除

### 如果下载失败

1. **GitHub 访问受限**：使用 jsdelivr CDN 链接（见上方）
2. **网络问题**：尝试使用科学上网工具
3. **浏览器下载**：直接在浏览器中打开下载链接

### 如果本地包未生效

1. 检查文件路径是否正确
2. 检查文件名是否为 `chi_sim.traineddata.gz`（注意后缀）
3. 清除浏览器缓存后重试
4. 检查浏览器控制台是否有错误信息

## 文件信息

- **文件名**: chi_sim.traineddata.gz
- **大小**: 约 10-15 MB
- **版本**: 4.0.0_fast
- **语言**: 简体中文 (Simplified Chinese)

## 注意事项

- ⚠️ 文件名必须完全匹配：`chi_sim.traineddata.gz`
- ⚠️ 文件必须放在 `tessdata` 文件夹中
- ⚠️ 如果没有本地包，系统会自动使用 CDN，不影响功能

## 自动回退机制

代码已经实现了智能加载：
1. 优先尝试使用本地语言包
2. 如果本地包不存在，自动使用 CDN 下载
3. 无论哪种方式，都会自动缓存到浏览器

所以即使不安装本地包，系统也能正常工作！

